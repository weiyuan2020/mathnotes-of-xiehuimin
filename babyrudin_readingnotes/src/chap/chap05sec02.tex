% chap05sec02
\section{Mean value theorems}
\mymyDef{
    \label{myDef:5.7}
    Let $f$ be a real function defined on a metric space $X$.
    We say that $f$ has a \emph{local maximum} at a point $p \in X$ 
    if there exists $\delta > 0$ such that $f(q) \leq f(p)$ 
    for all $q \in X$ with $d(p, q) < \delta$.
}

Local minima are defined likewise.

Our next theorem is the basis of many applications of differentiation.

\mythm{
    \label{thm:5.8}
    Let $f$ be defined on $[a, b]$;
    if $f$ has a local maximum at a point $x \in (a, b)$, 
    and if $f'(x)$ exists, then $f'(x) = 0$.
}
The analogous statement for local minima is of course also true.

\mythm{
    \label{thm:5.9}
    If $f$ and $g$ are continuous real functions on $[a, b]$ which are differentiable in $(a, b)$, then there is a point $x \in (a, b)$ at which
    \begin{equation*}
        \left[ f(b) - f(a) \right]g'(x) = 
        \left[ g(b) - g(a) \right]f'(x).
    \end{equation*}
}

Note that differentiability is not required at the endpoints.

\myproof{
    Put 
    \begin{equation*}
        h(t) = 
        \left[ f(b) - f(a) \right]g(t) -
        \left[ g(b) - g(a) \right]f(t)
        \quad
        (a \leq t \leq b).
    \end{equation*}
    Then $h$ is continuous on $[a,b]$, $h$ is differentiable in $(a, b)$, and
    \begin{equation}
        \label{eq:5.12}
        h(a) = f(b)g(a) - f(a)g(b) = h(b).
    \end{equation}
    To prove the theorem, we have to show that $h'(x) = 0$ for some $x \in (a, b)$.

    If $h$ is constant, this holds for every $x \in (a, b)$.
    If $h(t) > h(a)$ for some $t \in (a, b)$, let $x$ be a point on $[a, b]$ at which $h$ attains its maximum (Theorem \ref{thm:4.16}).
    By (\ref{eq:5.12}), $x \in (a, b)$, and Theorem \ref{thm:5.8} shows that $h'(x) \neq 0$.

    If $h(t) < h(a)$ for some $t \in (a, b)$, the same argument applies if we choose for $x$ a point on $[a, b]$ where $h$ attains its minimum.
}

This theorem is often called a \emph{generalized mean value theorem}; 
the following special case is usually referred to as ``the'' mean value theorem:

\mythm{
    \label{thm:5.10} 
    If $f$ is a real continuous function on $[a, b]$ 
    which is differentiable in $(a, b)$, 
    then there is a point $x \in (a, b)$ at which 
    \begin{equation*}
        f(b) - f(a) = (b - a)f'(x).
    \end{equation*}
}

\myproof{
    Take $g(x) = x$ in Theorem 5.9.
}

\mythm{
    \label{thm:5.11}
    Suppose $f$ is differentiable in $(a, b)$.
    \begin{enumerate}[(a)]
        \item If $f'(x) \geq 0$ for all $x \in (a, b)$, then $f$ is monotonically increasing.
        \item If $f'(x) = 0$ for all $x \in (a, b)$, then $f$ is constant.
        \item If $f'(x) \leq 0$ for all $x \in (a, b)$, then $f$ is monotonically decreasing.
    \end{enumerate}
}

\myproof{
    All conclusions can be read off from the equation
    \begin{equation*}
        f(x_2) - f(x_1) = (x_2 - x_1)f'(x),
    \end{equation*}
    which is valid, for each pair of numbers $x_1, x_2$ in $(a, b)$, 
    for \emph{some} $x$ between $x_1$ and $x_2$ .
}